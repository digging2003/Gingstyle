<html lang="ko" 
    xmlns:th="http://www.thymeleaf.org" 
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/admin}">
        
	<main layout:fragment="contents" class="content">
		<header class="admin-header d-flex justify-content-between p-3">
		    <h3>상품 관리</h3>
		    <button class="btn btn-success" id="addProductBtn"><i class="bi bi-plus-circle"></i> 상품 추가</button>
		</header>
		<section class="admin-section p-4">
		    <h4>상품 목록</h4>
		    <table class="table table-striped product-table">
		        <thead>
		            <tr>
		                <th>상품명</th>
		                <th>가격</th>
		                <th>재고</th>
		                <th>상태</th>
		                <th>관리</th>
		            </tr>
		        </thead>
		        <tbody>
		            <tr>
		                <td>예시 상품 A</td>
		                <td>₩20,000</td>
		                <td>50개</td>
		                <td>판매중</td>
		                <td><button class="btn btn-sm btn-outline-primary">수정</button></td>
		            </tr>
		            <tr>
		                <td>예시 상품 B</td>
		                <td>₩15,000</td>
		                <td>0개</td>
		                <td>품절</td>
		                <td><button class="btn btn-sm btn-outline-primary">수정</button></td>
		            </tr>
		            
		        </tbody>
		    </table>
		</section>

		<!-- 상품 추가/수정 모달 -->
		<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="productModalLabel">상품 정보</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
		      </div>
		      <div class="modal-body">
		        <form id="productForm">
		          <div class="mb-3">
		            <label class="form-label">상품명</label>
		            <input type="text" class="form-control" id="productName">
		          </div>
		
		          <div class="mb-3">
		            <label class="form-label">설명</label>
		            <textarea id="productDescription" class="form-control"></textarea>
		          </div>
		
		          <div class="row mb-3">
		            <div class="col">
		              <label class="form-label">할인 전 가격 (선택)</label>
		              <input type="number" class="form-control" id="productOriginalPrice">
		            </div>
		            <div class="col">
		              <label class="form-label">판매 가격</label>
		              <input type="number" class="form-control" id="productPrice">
		            </div>
		          </div>
		
		          <div class="mb-3">
		            <label class="form-label">재고</label>
		            <input type="number" class="form-control" id="productStock">
		          </div>
		
		          <div class="mb-3">
		            <label class="form-label">카테고리</label>
		            <select id="productCategory" class="form-select">
		              <option value="outers">OUTERS</option>
		              <option value="top">TOP</option>
		              <option value="bottom">BOTTOM</option>
		              <option value="dresses">DRESSES</option>
		            </select>
		          </div>
		
		          <div class="mb-3">
		            <label class="form-label">이미지 파일</label>
		            <div id="imagePreviewContainer" class="mb-2 d-flex flex-wrap"></div>
		            <input type="file" class="form-control mb-2" id="productImages" name="productImages" accept="image/*" multiple>
		          </div>
		        </form>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
		        <button type="button" class="btn btn-primary" id="saveProductBtn">저장</button>
		      </div>
		    </div>
		  </div>
		</div>
	</main>
	
	<script layout:fragment="script">
  $(document).ready(function () {
    // 썸머노트 적용
    $('#productDescription').summernote({
      height: 200,
      placeholder: '제품 설명을 입력하세요...'
    });

    // 이미지 미리보기
    $('#productImages').on('change', function () {
      const files = this.files;
      const $container = $('#imagePreviewContainer');
      $container.empty();

      Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = function (e) {
          const img = $('<img class="img-thumbnail me-2 mb-2" style="height:100px;">').attr('src', e.target.result);
          $container.append(img);
        };
        reader.readAsDataURL(file);
      });
    });

    // 모달 열기
    $('#addProductBtn').on('click', function () {
      const modal = new bootstrap.Modal(document.getElementById('productModal'));
      modal.show();
    });
  });
</script>
</html>